const pokemonRepository=function(){function a(a){d.push(a)}function b(a){pokemonRepository.loadDetails(a).then(function(){c(a)})}function c(a){$('#modal-body').html(''),$('#pokeName').text(a.name),$('#pokeImg').attr('src',a.imageUrl),$('#pokeHeight').text('Height: '+a.height),$('#pokeWeight').text('Weight: '+a.weight),$('#pokeTypes').text('Types: '+a.types)}const d=[];return{add:a,getAll:function(){return d},addListItem:function(a){const c=$('.list-group'),d=$('<li class="list-group-item"></li>');$(c).append(d);const e=$('<button class="btn" data-toggle="modal" data-target="#PokeModal"></button>');$(e).text(a.name),$(d).append(e),e.on('click',function(){b(a)})},search:function(a){d.filter(function(b){if(b.name===a)return b})},showDetails:b,loadList:function(){return $.ajax('https://pokeapi.co/api/v2/pokemon/?limit=150',{dataType:'json'}).then(function(b){$.each(b.results,function(b,c){const d={name:c.name.charAt(0).toUpperCase()+c.name.slice(1),detailsUrl:c.url};a(d)})}).catch(function(a){document.write(a)})},loadDetails:function(a){const b=a.detailsUrl;return $.ajax(b).then(function(b){a.imageUrl=b.sprites.front_default,a.height=b.height,a.weight=b.weight,a.types=2==b.types.length?[b.types[0].type.name,b.types[1].type.name]:[b.types[0].type.name]}).catch(function(a){document.write(a)})},showModal:c}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(a){pokemonRepository.addListItem(a)})});
